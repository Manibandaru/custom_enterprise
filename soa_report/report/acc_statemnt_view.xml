<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<template id="report_view_account_stamt">
		<t t-call="web.external_layout">
		<t t-set="data_report_dpi" t-value="90"/>
            <t t-foreach="docs" t-as="o">
		<div class="page">
            <br/>
            <br/>
            <br/>

			<div style="text-align:center">
                    <strong><h3> STATEMENT OF ACCOUNT<br/></h3></strong>

            </div>

            <div class="row">
                <div >
                    <br/>
                    <strong>DATE : <span t-esc="Date"/><br/></strong>
                   <strong> <span t-field="o.name"/><br/></strong>
                    <span t-raw="o.contact_address.replace('\n\n', '\n').replace('\n', '&lt;br&gt;')"/>
                    <span t-field="o.vat"/>
                </div>
            </div>


                <t t-if="Lines[o.id]">
<!--                    <span t-field="res_company.with_context(lang=o.lang).overdue_msg"/>-->
                    <table class="table table-bordered" t-foreach="Lines[o.id]" t-as="currency">
                        <thead>
                            <tr>
                                <th>Reference number</th>
                                <th >Date</th>
                                <th >Due Date</th>
                                <th >Job Number</th>
                                <th>Communication</th>
<!--                                <th >Due</th>-->
<!--                                <th >Paid</th>-->
                                <th >Amount Due</th>
                            </tr>
                        </thead>
                        <tr t-foreach="Lines[o.id][currency]" t-as="line">
                            <td>
                                <span t-esc="line['move_id']"/>
                            </td>
                            <td>
                                <span t-esc="line['date']"/>
                            </td>
                            <t t-if="not line['payment_id']" >
                                <td t-if="line['date_maturity'] &lt; Date">
                                    <span  style="color:red"   t-esc="line['date_maturity']"/>
                                </td>
                                <td t-if="line['date_maturity'] &gt; Date">
                                    <span   style="color:black"   t-esc="line['date_maturity']"/>
                                </td>
                                 <td t-if="line['date_maturity'] == Date">
                                    <span style="color:black"   t-esc="line['date_maturity']"/>
                                </td>
                            </t>



                            <td t-if="line['payment_id'] ">
                                <span style="color:white"   t-esc="line['date_maturity']"/>
                            </td>

                            <td >
                                <span t-esc="line['origin']"/>
                            </td>
                            <td>
                                <t t-if="line['name'] != '/'"><span t-esc="line['name']"/></t>
                                <span t-esc="line['ref']"/>
                            </td>
<!--                            <td style="text-align:right">-->
<!--                                <span t-esc="line['debit']" t-options="{'widget': 'monetary', 'display_currency': currency}"/>-->
<!--                            </td>-->
<!--                            <td style="text-align:right">-->
<!--                                <span t-esc="line['credit']" t-options="{'widget': 'monetary', 'display_currency': currency}"/>-->
<!--                            </td>-->
                            <td style="text-align:right">
                                <span t-esc="line['amount']" t-options="{'widget': 'monetary', 'display_currency': currency}"/>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="4"></td>
                            <td><strong>Subtotal :</strong></td>
                            <td style="text-align:right"><span t-esc="Totals[o.id][currency]['amount']" t-options="{'widget': 'monetary', 'display_currency': currency}"/></td>
<!--                            <td style="text-align:right"><span t-esc="Totals[o.id][currency]['paid']" t-options="{'widget': 'monetary', 'display_currency': currency}"/></td>-->
<!--                            <td style="text-align:right"><span t-esc="Totals[o.id][currency]['mat']" t-options="{'widget': 'monetary', 'display_currency': currency}"/></td>-->
<!--                            <td></td>-->
                        </tr>

                        <tr>
                            <td colspan="4"></td>
                            <td><strong>Total OverDue :</strong></td>
                            <td style="text-align:right">
                                <span t-esc="Totals[o.id][currency]['mat']" t-options="{'widget': 'monetary', 'display_currency': currency}"/>
                            </td>
                        </tr>
                    </table>
                </t>
                <p t-if="not Lines[o.id]">
                    <strong>There is nothing due with this customer.</strong>
                </p>

        </div>
		</t>
		</t>
	</template>

<template id="acc_statemnt_view">
		<t t-call="web.html_container">
			<t t-foreach="docs" t-as="doc">
			<t t-call="soa_report.report_view_account_stamt" />
			</t>
		</t>
</template>



    <template id="account_reports.followup_filter_info_template">
            <div t-if='context.get("mail") != True' class="print_only" style='margin-bottom: 20px;'>
        <t t-if="invoice_address_id" t-set="partner_addr" t-value="invoice_address_id"></t>
        <t t-else="" t-set="partner_addr" t-value="partner"></t>
        <t t-if="context.get('snailmail_layout')" t-set="contact_widget_fields" t-value="['address', 'name']"/>
        <t t-else="" t-set="contact_widget_fields" t-value="['address', 'name', 'phone']"/>
                <div>
                    <span style="text-align:center"> STATEMENT OF ACCOUNT</span>
                </div>
                <div class="row">
                    <div class="col-5 offset-7" style='margin-top: 15px;'>
                        <div t-field="partner_addr.self"
                            t-options='{"widget": "contact", "fields": contact_widget_fields, "no_marker": True}'/>
                        <span t-field="partner_addr.vat"/>
                    </div>
                </div>
                <p style="margin-top: 35px;">
                    Date: <span t-esc="today" t-options="{'widget': 'date'}"/><br/>
                    <t t-if='partner_addr.ref'>Customer ref: <span t-field="partner_addr.ref"/></t>
                </p>
            </div>
        </template>






</odoo>